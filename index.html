<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Volt –ò–∑–ø–∏—Ç - –ê–¥—Ä–µ—Å–∏ –°–æ—Ñ–∏—è</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f0f2f5;
            padding-top: 70px; /* Space for fixed navbar */
            padding-bottom: 40px;
        }
        .stat-badge {
            font-size: 0.85rem;
            width: 40px;
            display: inline-block;
            text-align: center;
        }
        .address-sub {
            font-size: 0.85rem;
            color: #6c757d;
        }
        /* Smooth transitions for buttons */
        .btn-option {
            transition: all 0.2s;
            text-align: left;
            white-space: normal; /* Allow text wrapping */
            font-weight: 500;
        }
        .nav-pills .nav-link.active {
            background-color: #0d6efd;
        }
        .nav-pills .nav-link {
            color: #495057;
            font-weight: 600;
        }
        /* Hide sections initially */
        .view-section {
            display: none;
        }
        .view-section.active {
            display: block;
        }
    </style>
</head>
<body>

<nav class="navbar fixed-top navbar-light bg-white shadow-sm">
    <div class="container-fluid justify-content-center">
        <ul class="nav nav-pills" id="mainNav">
            <li class="nav-item">
                <a class="nav-link active" href="#" onclick="switchTab('game')">üéÆ –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" onclick="switchTab('list')">üìä –°–ø–∏—Å—ä–∫ & –ò–Ω—Ñ–æ</a>
            </li>
        </ul>
    </div>
</nav>

<div class="container main-content">
    
    <div id="view-game" class="view-section active">
        <div class="row justify-content-center">
            <div class="col-md-8 col-lg-6">
                
                <div class="d-flex justify-content-between mb-3 px-2 text-muted small fw-bold">
                    <span>üî• –°–µ—Ä–∏—è: <span id="streak" class="text-primary">0</span></span>
                    <span>‚úÖ –û–±—â–æ –≤–µ—Ä–Ω–∏: <span id="total-correct" class="text-success">0</span></span>
                </div>

                <div class="card shadow-sm border-0">
                    <div class="card-body p-4 text-center">
                        <p class="text-uppercase text-muted mb-2 small fw-bold">–ö—ä–¥–µ —Å–µ –Ω–∞–º–∏—Ä–∞:</p>
                        <h3 class="card-title text-primary mb-4 fw-bold" id="question-text">–ó–∞—Ä–µ–∂–¥–∞–Ω–µ...</h3>
                        
                        <div id="options-container" class="d-grid gap-2">
                            </div>

                        <div id="feedback-container" class="mt-3" style="min-height: 50px;">
                            <p id="feedback" class="fw-bold mb-0"></p>
                            <button id="next-btn" class="btn btn-primary rounded-pill px-4 mt-2 d-none" onclick="nextQuestion()">
                                –°–ª–µ–¥–≤–∞—â –≤—ä–ø—Ä–æ—Å üëâ
                            </button>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <div id="view-list" class="view-section">
        <div class="row justify-content-center">
            <div class="col-md-10 col-lg-8">
                
                <div class="card mb-3 shadow-sm border-0">
                    <div class="card-body">
                        <h5 class="card-title">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –¥–∞–Ω–Ω–∏</h5>
                        <div class="d-flex gap-2 flex-wrap">
                            <button class="btn btn-outline-primary btn-sm" onclick="downloadStats()">üíæ –ó–∞–ø–∞–∑–∏ —Ñ–∞–π–ª</button>
                            <button class="btn btn-outline-secondary btn-sm" onclick="document.getElementById('file-input').click()">üìÇ –ó–∞—Ä–µ–¥–∏ —Ñ–∞–π–ª</button>
                            <button class="btn btn-outline-danger btn-sm ms-auto" onclick="resetStats()">üóëÔ∏è –ù—É–ª–∏—Ä–∞–π</button>
                        </div>
                        <input type="file" id="file-input" style="display: none;" onchange="loadStats(this)">
                    </div>
                </div>

                <h5 class="mb-3 ps-2">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –æ–±–µ–∫—Ç–∏ (<span id="total-count">0</span>)</h5>
                
                <div class="list-group shadow-sm" id="list-container">
                    </div>
                
                <div class="text-center mt-4 text-muted small">
                    <p>–ù–∞–π-—á–µ—Å—Ç–æ –±—ä—Ä–∫–∞–Ω–∏—Ç–µ –∞–¥—Ä–µ—Å–∏ —Å–µ –ø–æ–∫–∞–∑–≤–∞—Ç –Ω–∞–π-–æ—Ç–≥–æ—Ä–µ.</p>
                </div>

            </div>
        </div>
    </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>
    // DATA
    const rawData = [
        {id: 1, name: "–ú–∏–Ω–∏—Å—Ç–µ—Ä—Å—Ç–≤–æ –Ω–∞ –≤—ä—Ç—Ä–µ—à–Ω–∏—Ç–µ —Ä–∞–±–æ—Ç–∏", addr: "—É–ª. ‚Äû6-—Ç–∏ —Å–µ–ø—Ç–µ–º–≤—Ä–∏‚Äú ‚Ññ 29"},
        {id: 2, name: "–ú–∏–Ω–∏—Å—Ç–µ—Ä—Å—Ç–≤–æ –Ω–∞ –ø—Ä–∞–≤–æ—Å—ä–¥–∏–µ—Ç–æ", addr: "—É–ª. ‚Äû–°–ª–∞–≤—è–Ω—Å–∫–∞‚Äú ‚Ññ 1"},
        {id: 3, name: "–ú–∏–Ω–∏—Å—Ç–µ—Ä—Å—Ç–≤–æ –Ω–∞ —Ä–µ–≥–∏–æ–Ω–∞–ª–Ω–æ—Ç–æ —Ä–∞–∑–≤–∏—Ç–∏–µ –∏ –±–ª–∞–≥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ—Ç–æ", addr: "—É–ª. ‚Äû–°–≤. –°–≤. –ö–∏—Ä–∏–ª –∏ –ú–µ—Ç–æ–¥–∏–π‚Äú ‚Ññ 17"},
        {id: 4, name: "–ú–∏–Ω–∏—Å—Ç–µ—Ä—Å—Ç–≤–æ –Ω–∞ —Ç—Ä—É–¥–∞ –∏ —Å–æ—Ü–∏–∞–ª–Ω–∞—Ç–∞ –ø–æ–ª–∏—Ç–∏–∫–∞", addr: "—É–ª. ‚Äû–¢—Ä–∏–∞–¥–∏—Ü–∞‚Äú ‚Ññ 2"},
        {id: 5, name: "–ú–∏–Ω–∏—Å—Ç–µ—Ä—Å—Ç–≤–æ –Ω–∞ —Ñ–∏–Ω–∞–Ω—Å–∏—Ç–µ", addr: "—É–ª. ‚Äû–ì. –°. –†–∞–∫–æ–≤—Å–∫–∏‚Äú ‚Ññ 102"},
        {id: 6, name: "–ú–∏–Ω–∏—Å—Ç–µ—Ä—Å—Ç–≤–æ –Ω–∞ –∏–∫–æ–Ω–æ–º–∏–∫–∞—Ç–∞ –∏ –∏–Ω–¥—É—Å—Ç—Ä–∏—è—Ç–∞", addr: "—É–ª. ‚Äû–°–ª–∞–≤—è–Ω—Å–∫–∞‚Äú ‚Ññ 8"},
        {id: 7, name: "–ú–∏–Ω–∏—Å—Ç–µ—Ä—Å—Ç–≤–æ –Ω–∞ –∑–µ–º–µ–¥–µ–ª–∏–µ—Ç–æ –∏ —Ö—Ä–∞–Ω–∏—Ç–µ", addr: "–±—É–ª. ‚Äû–•—Ä–∏—Å—Ç–æ –ë–æ—Ç–µ–≤‚Äú ‚Ññ 55"},
        {id: 8, name: "–ú–∏–Ω–∏—Å—Ç–µ—Ä—Å—Ç–≤–æ –Ω–∞ –µ–Ω–µ—Ä–≥–µ—Ç–∏–∫–∞—Ç–∞", addr: "—É–ª. ‚Äû–¢—Ä–∏–∞–¥–∏—Ü–∞‚Äú ‚Ññ 8"},
        {id: 9, name: "–ö–æ–º–∏—Å–∏—è –∑–∞ –∑–∞—â–∏—Ç–∞ –Ω–∞ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—è—Ç–∞", addr: "–±—É–ª. –í–∏—Ç–æ—à–∞ ‚Ññ 18"},
        {id: 10, name: "–ö–æ–º–∏—Å–∏—è –∑–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤ –Ω–∞–¥–∑–æ—Ä", addr: "—É–ª. ‚Äû–ë—É–¥–∞–ø–µ—â–∞‚Äú ‚Ññ 16"},
        {id: 11, name: "–ò–∑–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∞ –∞–≥–µ–Ω—Ü–∏—è ‚Äû–ê–≤—Ç–æ–º–æ–±–∏–ª–Ω–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è‚Äú ‚Äì –¶–µ–Ω—Ç—ä—Ä", addr: "—É–ª. ‚Äû–ì–µ–Ω–µ—Ä–∞–ª –ì—É—Ä–∫–æ‚Äú ‚Ññ 5"},
        {id: 12, name: "–û–±–ª–∞—Å—Ç–µ–Ω –æ—Ç–¥–µ–ª ‚Äû–ê–≤—Ç–æ–º–æ–±–∏–ª–Ω–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è‚Äú ‚Äì –°–æ—Ñ–∏—è", addr: "—É–ª. ‚Äû–í–∏—Ç–∏–Ω—è‚Äú ‚Ññ 1"},
        {id: 13, name: "–ü–æ–∂–∞—Ä–Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç –∏ –∑–∞—â–∏—Ç–∞ –Ω–∞ –Ω–∞—Å–µ–ª–µ–Ω–∏–µ—Ç–æ ‚Äì –°–æ—Ñ–∏—è", addr: "—É–ª. ‚Äû–ï–∫–∑–∞—Ä—Ö –ô–æ—Å–∏—Ñ‚Äú ‚Ññ 46"},
        {id: 14, name: "–°—Ç–æ–ª–∏—á–Ω–∞ –¥–∏—Ä–µ–∫—Ü–∏—è –Ω–∞ –í—ä—Ç—Ä–µ—à–Ω–∏—Ç–µ –†–∞–±–æ—Ç–∏ (–°–î–í–†)", addr: "—É–ª. ‚Äû–ï–∫–∑–∞—Ä—Ö –ê–Ω—Ç–∏–º I‚Äú ‚Ññ 5"},
        {id: 15, name: "–õ–µ—Ç–∏—â–µ –°–æ—Ñ–∏—è ‚Äì –¢–µ—Ä–º–∏–Ω–∞–ª 1", addr: "–±—É–ª. ‚Äû–•—Ä–∏—Å—Ç–æ—Ñ–æ—Ä –ö–æ–ª—É–º–±‚Äú ‚Ññ 1"},
        {id: 16, name: "08–º–æ –†–£ ‚Äì –°–î–í–†", addr: "—É–ª. ‚Äû–ò–≤–∞–Ω –ê—Ä–∞–±–∞–¥–∂–∏—è—Ç–∞‚Äú ‚Ññ 141"},
        {id: 17, name: "03—Ç–æ –†–£ ‚Äì –°–î–í–†", addr: "—É–ª. ‚Äû–ò–Ω–∂. –í–æ–π–≤–æ–¥–∞‚Äú ‚Ññ 2"},
        {id: 18, name: "02—Ä–æ –†–£ ‚Äì –°–î–í–†", addr: "—É–ª. ‚Äû–ö–Ω—è–∑ –ë–æ—Ä–∏—Å I‚Äú ‚Ññ 215"},
        {id: 19, name: "–ñ–ü –≥–∞—Ä–∞ ‚Äû–ü–æ–¥—É—è–Ω–µ‚Äú", addr: "–±—É–ª. ‚Äû–ú–∞–¥—Ä–∏–¥‚Äú ‚Ññ 57"},
        {id: 20, name: "–ñ–ü –≥–∞—Ä–∞ ‚Äû–ó–∞—Ö–∞—Ä–Ω–∞ –§–∞–±—Ä–∏–∫–∞‚Äú", addr: "—É–ª. ‚Äû–ì—Ä—É—Ö –•—Ä–∏—Å—Ç–æ –°—Ç–æ—è–Ω–æ–≤‚Äú ‚Ññ 1"},
        {id: 21, name: "–¶–µ–Ω—Ç—Ä–∞–ª–Ω–∞ –ê–≤—Ç–æ–≥–∞—Ä–∞ –°–æ—Ñ–∏—è", addr: "–±—É–ª. ‚Äû–ö–Ω—è–≥–∏–Ω—è –ú–∞—Ä–∏—è –õ—É–∏–∑–∞‚Äú ‚Ññ 100"},
        {id: 22, name: "–ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤—Å–∫–∞ –±–æ–ª–Ω–∏—Ü–∞", addr: "—É–ª. ‚Äû–°–≤. –ì–µ–æ—Ä–≥–∏ –°–æ—Ñ–∏–π—Å–∫–∏‚Äú ‚Ññ 1"},
        {id: 23, name: "–£–ú–ë–ê–õ–°–ú ‚Äû–ù. –ò. –ü–∏—Ä–æ–≥–æ–≤‚Äú", addr: "–±—É–ª. ‚Äû–ì–µ–Ω–µ—Ä–∞–ª –ï–¥—É–∞—Ä–¥ –¢–æ—Ç–ª–µ–±–µ–Ω‚Äú ‚Ññ 21"},
        {id: 24, name: "–°–ø–µ—à–Ω–∞ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∞ –ø–æ–º–æ—â ‚Äì –°–æ—Ñ–∏—è", addr: "–±—É–ª. ‚Äû–í–∞—Å–∏–ª –õ–µ–≤—Å–∫–∏‚Äú ‚Ññ 129"},
        {id: 25, name: "–í–æ–µ–Ω–Ω–æ–º–µ–¥–∏—Ü–∏–Ω—Å–∫–∞ –∞–∫–∞–¥–µ–º–∏—è (–í–ú–ê)", addr: "—É–ª. ‚Äû–°–≤. –ì–µ–æ—Ä–≥–∏ –°–æ—Ñ–∏–π—Å–∫–∏‚Äú ‚Ññ 3"},
        {id: 26, name: "–ù–∞—Ü–∏–æ–Ω–∞–ª–Ω–∞ –∫–∞—Ä–¥–∏–æ–ª–æ–≥–∏—á–Ω–∞ –±–æ–ª–Ω–∏—Ü–∞", addr: "—É–ª. ‚Äû–ö–æ–Ω—å–æ–≤–∏—Ü–∞‚Äú ‚Ññ 65"},
        {id: 27, name: "–ê–¥–∂–∏–±–∞–¥–µ–º –°–∏—Ç–∏ –ö–ª–∏–Ω–∏–∫ ‚Äì –°–æ—Ñ–∏—è (–£–ú–ë–ê–õ –¢–æ–∫—É–¥–∞)", addr: "–±—É–ª. ‚Äû–ù–∏–∫–æ–ª–∞ –í–∞–ø—Ü–∞—Ä–æ–≤‚Äú ‚Ññ 51 ‚Äû–ë‚Äú"},
        {id: 28, name: "–£–ú–ë–ê–õ ‚Äû–¶–∞—Ä–∏—Ü–∞ –ô–æ–∞–Ω–Ω–∞ ‚Äì –ò–°–£–õ‚Äú", addr: "—É–ª. ‚Äû–ë—è–ª–æ –º–æ—Ä–µ‚Äú ‚Ññ 8"},
        {id: 29, name: "–£–ú–ë–ê–õ ‚Äû–°–≤–µ—Ç–∞ –ê–Ω–Ω–∞‚Äú ‚Äì –°–æ—Ñ–∏—è", addr: "—É–ª. ‚Äû–î–∏–º–∏—Ç—ä—Ä –ú–æ–ª–ª–æ–≤‚Äú ‚Ññ 1"},
        {id: 30, name: "–£–ê–ì–ë ‚Äû–ú–∞–π—á–∏–Ω –¥–æ–º‚Äú", addr: "—É–ª. ‚Äû–ó–¥—Ä–∞–≤–µ‚Äú ‚Ññ 2"},
        {id: 31, name: "–ü–°–ê–ì–ë ‚Äû–°–≤–µ—Ç–∞ –°–æ—Ñ–∏—è‚Äú", addr: "—É–ª. ‚Äû–ú–∏—Ö–∞–ª–∞–∫–∏ –¢–∞—à–µ–≤‚Äú ‚Ññ 2"},
        {id: 32, name: "–ü—ä—Ä–≤–∞ —á–∞—Å—Ç–Ω–∞ –ê–ì –±–æ–ª–Ω–∏—Ü–∞ ‚Äû–†–∞–π–Ω–∞ –∫–Ω—è–≥–∏–Ω—è‚Äú", addr: "—É–ª. ‚Äû–í–æ–π–≤–æ–¥–∏–Ω–∞ –º–æ–≥–∏–ª–∞‚Äú ‚Ññ 19"},
        {id: 33, name: "–í—Ç–æ—Ä–∞ –°–ê–ì–ë–ê–õ ‚Äû–®–µ–π–Ω–æ–≤–æ‚Äú", addr: "—É–ª. ‚Äû–®–µ–π–Ω–æ–≤–æ‚Äú ‚Ññ 19"},
        {id: 34, name: "–ê—Ä–µ–Ω–∞ 8888 –°–æ—Ñ–∏—è", addr: "–±—É–ª. ‚Äû–ê—Å–µ–Ω –ô–æ—Ä–¥–∞–Ω–æ–≤‚Äú ‚Ññ 1"},
        {id: 35, name: "–°–ø–æ—Ä—Ç–µ–Ω —Ü–µ–Ω—Ç—ä—Ä –û—Ä–ª–∞–Ω–¥–æ–≤—Ü–∏", addr: "—É–ª. ‚Äû–ù–µ—à–æ –ë–æ–Ω—á–µ–≤‚Äú ‚Ññ 26"},
        {id: 36, name: "–ê—Å–∏–∫—Å –ê—Ä–µ–Ω–∞ / –ó–∞–ª–∞ –§–µ—Å—Ç–∏–≤–∞–ª–Ω–∞", addr: "—É–ª. ‚Äû–ú–∞–Ω–∞—Ñ—Å–∫–∞‚Äú ‚Ññ 35"},
        {id: 37, name: "–ó–∞–ª–∞ –£–Ω–∏–≤–µ—Ä—Å–∏–∞–¥–∞", addr: "–±—É–ª. ‚Äû–®–∏–ø—á–µ–Ω—Å–∫–∏ –ø—Ä–æ—Ö–æ–¥‚Äú ‚Ññ 2"},
        {id: 38, name: "–°–ø–æ—Ä—Ç–µ–Ω —Ü–µ–Ω—Ç—ä—Ä ‚Äû–ú–∞–∫—Å—Ñ–∏—Ç‚Äú", addr: "—É–ª. ‚Äû–ü–æ–ª–∫–æ–≤–Ω–∏–∫ –ë–æ—Ä–∏—Å –î—Ä–∞–Ω–≥–æ–≤‚Äú ‚Ññ 8"},
        {id: 39, name: "–°–ø–æ—Ä—Ç–µ–Ω –∫–æ–º–ø–ª–µ–∫—Å ‚Äû–ê–∫–∞–¥–µ–º–∏–∫‚Äì4–∫–º.‚Äú", addr: "—É–ª. ‚Äû–∞–∫–∞–¥. –†–æ—Å—Ç–∏—Å–ª–∞–≤ –ö–∞–∏—à–µ–≤‚Äú ‚Ññ 125"},
        {id: 40, name: "–°—Ç–∞–¥–∏–æ–Ω ‚Äû–ì–µ–æ—Ä–≥–∏ –ê—Å–ø–∞—Ä—É—Ö–æ–≤‚Äú", addr: "—É–ª. ‚Äû–¢–æ–¥–æ—Ä–∏–Ω–∏ –∫—É–∫–ª–∏‚Äú ‚Ññ 47"},
        {id: 41, name: "–ù–∞—Ü–∏–æ–Ω–∞–ª–µ–Ω —Å—Ç–∞–¥–∏–æ–Ω ‚Äû–í–∞—Å–∏–ª –õ–µ–≤—Å–∫–∏‚Äú", addr: "–±—É–ª. ‚Äû–ï–≤–ª–æ–≥–∏ –∏ –•—Ä–∏—Å—Ç–æ –ì–µ–æ—Ä–≥–∏–µ–≤–∏‚Äú ‚Ññ 38"},
        {id: 42, name: "–°—Ç–∞–¥–∏–æ–Ω ‚Äû–ë—ä–ª–≥–∞—Ä—Å–∫–∞ –∞—Ä–º–∏—è‚Äú", addr: "–±—É–ª. ‚Äû–î—Ä–∞–≥–∞–Ω –¶–∞–Ω–∫–æ–≤‚Äú ‚Ññ 3"},
        {id: 43, name: "–°—Ç–∞–¥–∏–æ–Ω ‚Äû–°–ª–∞–≤–∏—è‚Äú", addr: "—É–ª. ‚Äû–ö–æ–ª–æ–º–∞–Ω‚Äú 1"},
        {id: 44, name: "–°—Ç–∞–¥–∏–æ–Ω ‚Äû–†–∞–∫–æ–≤—Å–∫–∏‚Äú", addr: "—É–ª. ‚Äû–ë–∞–ª—à–∞‚Äú ‚Ññ 18"},
        {id: 45, name: "–í–°–£ ‚Äû–õ—é–±–µ–Ω –ö–∞—Ä–∞–≤–µ–ª–æ–≤‚Äú", addr: "—É–ª. ‚Äû–°—É—Ö–æ–¥–æ–ª—Å–∫–∞‚Äú ‚Ññ 175"},
        {id: 46, name: "–ù–ú–ê ‚Äû–ø—Ä–æ—Ñ. –ü–∞–Ω—á–æ –í–ª–∞–¥–∏–≥–µ—Ä–æ–≤‚Äú", addr: "–±—É–ª. ‚Äû–ï–≤–ª–æ–≥–∏ –∏ –•—Ä–∏—Å—Ç–æ –ì–µ–æ—Ä–≥–∏–µ–≤–∏‚Äú ‚Ññ 94"},
        {id: 47, name: "–í–æ–µ–Ω–Ω–∞ –∞–∫–∞–¥–µ–º–∏—è ‚Äû–ì. –°. –†–∞–∫–æ–≤—Å–∫–∏‚Äú", addr: "–±—É–ª. ‚Äû–ï–≤–ª–æ–≥–∏ –∏ –•—Ä–∏—Å—Ç–æ –ì–µ–æ—Ä–≥–∏–µ–≤–∏‚Äú ‚Ññ 82"},
        {id: 48, name: "–õ–µ—Å–æ—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç", addr: "–±—É–ª. ‚Äû–°–≤. –ö–ª–∏–º–µ–Ω—Ç –û—Ö—Ä–∏–¥—Å–∫–∏‚Äú ‚Ññ 10"},
        {id: 49, name: "–£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç –ø–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, —Å—Ç—Ä–æ–∏—Ç–µ–ª—Å—Ç–≤–æ –∏ –≥–µ–æ–¥–µ–∑–∏—è", addr: "–±—É–ª. ‚Äû–•—Ä–∏—Å—Ç–æ –°–º–∏—Ä–Ω–µ–Ω—Å–∫–∏‚Äú ‚Ññ 1"},
        {id: 50, name: "–í–¢–£ ‚Äû–¢–æ–¥–æ—Ä –ö–∞–±–ª–µ—à–∫–æ–≤‚Äú", addr: "—É–ª. ‚Äû–ì–µ–æ –ú–∏–ª–µ–≤‚Äú ‚Ññ 158"},
        {id: 51, name: "–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç ‚Äì –°–æ—Ñ–∏—è", addr: "–±—É–ª. ‚Äû–ê–∫–∞–¥–µ–º–∏–∫ –ò–≤–∞–Ω –ï–≤—Å—Ç–∞—Ç–∏–µ–≤ –ì–µ—à–æ–≤‚Äú ‚Ññ 15"},
        {id: 52, name: "–°–æ—Ñ–∏–π—Å–∫–∏ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç ‚Äû–°–≤–µ—Ç–∏ –ö–ª–∏–º–µ–Ω—Ç –û—Ö—Ä–∏–¥—Å–∫–∏‚Äú", addr: "–±—É–ª. ‚Äû–¶–∞—Ä –û—Å–≤–æ–±–æ–¥–∏—Ç–µ–ª‚Äú ‚Ññ 15"},
        {id: 53, name: "–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç ‚Äì –°–æ—Ñ–∏—è", addr: "–±—É–ª. ‚Äû–ö–ª–∏–º–µ–Ω—Ç –û—Ö—Ä–∏–¥—Å–∫–∏‚Äú ‚Ññ 8"},
        {id: 54, name: "–ê–∫–∞–¥–µ–º–∏—è –Ω–∞ –ú–í–†", addr: "–±—É–ª. ‚Äû–ê–ª–µ–∫—Å–∞–Ω–¥—ä—Ä –ú–∞–ª–∏–Ω–æ–≤‚Äú ‚Ññ 91"},
        {id: 55, name: "–•–∏–º–∏–∫–æ-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ–Ω –∏ –º–µ—Ç–∞–ª—É—Ä–≥–∏—á–µ–Ω —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç ‚Äì –°–æ—Ñ–∏—è", addr: "–±—É–ª. ‚Äû–°–≤. –ö–ª–∏–º–µ–Ω—Ç –û—Ö—Ä–∏–¥—Å–∫–∏‚Äú ‚Ññ 8"},
        {id: 56, name: "–•–æ—Ç–µ–ª ‚Äû–†–æ—Å–ª–∏–Ω –°–µ–Ω—Ç—Ä—ä–ª –ü–∞—Ä–∫ –•–æ—Ç–µ–ª ‚Äì –°–æ—Ñ–∏—è‚Äú", addr: "–±—É–ª. ‚Äû–í–∏—Ç–æ—à–∞‚Äú ‚Ññ 106"},
        {id: 57, name: "–•–æ—Ç–µ–ª ‚Äû–ì—Ä–∞–Ω–¥ —Ö–æ—Ç–µ–ª ‚Äì –°–æ—Ñ–∏—è‚Äú", addr: "—É–ª. ‚Äû–≥–µ–Ω. –ô–æ—Å–∏—Ñ –í. –ì—É—Ä–∫–æ‚Äú ‚Ññ 1"},
        {id: 58, name: "–•–æ—Ç–µ–ª ‚Äû–•–µ–º—É—Å‚Äú ‚Äì –°–æ—Ñ–∏—è", addr: "–±—É–ª. ‚Äû–ß–µ—Ä–Ω–∏ –≤—Ä—ä—Ö‚Äú ‚Ññ 25"},
        {id: 59, name: "–•–æ—Ç–µ–ª ‚Äû–ñ–∞—Å–º–∏–Ω‚Äú ‚Äì –°–æ—Ñ–∏—è", addr: "–±—É–ª. ‚Äû–°–∏–º–µ–æ–Ω–æ–≤—Å–∫–æ —à–æ—Å–µ‚Äú ‚Ññ 252"},
        {id: 60, name: "–•–æ—Ç–µ–ª ‚Äû–ë—Ä–æ–¥‚Äú ‚Äì –°–æ—Ñ–∏—è", addr: "–±—É–ª. ‚Äû–°–∏–º–µ–æ–Ω–æ–≤—Å–∫–æ —à–æ—Å–µ‚Äú ‚Ññ 66"},
        {id: 61, name: "–•–æ—Ç–µ–ª ‚Äû–ú–∞—Ä–∏–Ω–µ–ª–∞‚Äú ‚Äì –°–æ—Ñ–∏—è", addr: "–±—É–ª. ‚Äû–î–∂–µ–π–º—Å –ë–∞—É—á—ä—Ä‚Äú ‚Ññ 100"},
        {id: 62, name: "–•–æ—Ç–µ–ª ‚Äû–ö—Ä–∏—Å—Ç–∞–ª –ø–∞–ª–∞—Å‚Äú ‚Äì –°–æ—Ñ–∏—è", addr: "—É–ª. ‚Äû–®–∏–ø–∫–∞‚Äú ‚Ññ 14"},
        {id: 63, name: "–•–æ—Ç–µ–ª ‚Äû–ú–µ–≥ ‚Äì –õ–æ–∑–µ–Ω–µ—Ü —Ö–æ—Ç–µ–ª‚Äú ‚Äì –°–æ—Ñ–∏—è", addr: "—É–ª. ‚Äû–ö—Ä—É–º –ü–æ–ø–æ–≤‚Äú ‚Ññ 84"},
        {id: 64, name: "–•–æ—Ç–µ–ª ‚Äû–ò–Ω—Ç–µ—Ä–∫–æ–Ω—Ç–∏–Ω–µ–Ω—Ç–∞–ª‚Äú ‚Äì –°–æ—Ñ–∏—è", addr: "–ø–ª. ‚Äû–ù–∞—Ä–æ–¥–Ω–æ —Å—ä–±—Ä–∞–Ω–∏–µ‚Äú ‚Ññ 4"},
        {id: 65, name: "–•–æ—Ç–µ–ª ‚Äû–¶–µ–Ω—Ç—Ä–∞–ª‚Äú ‚Äì –°–æ—Ñ–∏—è", addr: "–±—É–ª. ‚Äû–•—Ä–∏—Å—Ç–æ –ë–æ—Ç–µ–≤‚Äú ‚Ññ 52"},
        {id: 66, name: "–•–æ—Ç–µ–ª ‚Äû–•–ò–õ‚Äú ‚Äì –°–æ—Ñ–∏—è", addr: "–±—É–ª. ‚Äû–î–∂–µ–π–º—Å –ë–∞—É—á—ä—Ä‚Äú ‚Ññ 76 ‚Äû–ë‚Äú"}
    ];

    // STATE
    let locations = [];
    let currentQuestion = null;
    let streak = 0;
    let totalCorrect = 0;

    // INIT
    function init() {
        const saved = localStorage.getItem('volt_locations_v2');
        if (saved) {
            locations = JSON.parse(saved);
        } else {
            locations = rawData.map(l => ({...l, correct: 0, wrong: 0, lastSeen: 0}));
        }
        
        document.getElementById('total-count').innerText = locations.length;
        renderList();
        nextQuestion();
    }

    // GAME LOGIC
    function getWeightedRandom() {
        let weightedArray = [];
        locations.forEach(loc => {
            let weight = (loc.wrong * 6) + 1;
            if (loc.correct === 0 && loc.wrong === 0) weight += 15; // Higher priority for new
            if (loc.correct > loc.wrong + 3) weight = 1; // Lower priority for mastered
            
            for(let i=0; i<weight; i++) weightedArray.push(loc);
        });
        
        return weightedArray[Math.floor(Math.random() * weightedArray.length)];
    }

    function nextQuestion() {
        document.getElementById('feedback').innerText = '';
        document.getElementById('next-btn').classList.add('d-none');
        const optsContainer = document.getElementById('options-container');
        optsContainer.innerHTML = '';

        currentQuestion = getWeightedRandom();
        document.getElementById('question-text').innerText = currentQuestion.name;

        // Generate distractors
        let options = [currentQuestion];
        while (options.length < 4) {
            let r = locations[Math.floor(Math.random() * locations.length)];
            if (!options.includes(r)) options.push(r);
        }
        options.sort(() => Math.random() - 0.5);

        // Render Buttons
        options.forEach(opt => {
            const btn = document.createElement('button');
            btn.className = 'btn btn-outline-secondary btn-lg btn-option py-3';
            btn.innerText = opt.addr;
            btn.onclick = () => checkAnswer(opt, btn);
            optsContainer.appendChild(btn);
        });
    }

    function checkAnswer(selected, btnElement) {
        if (!document.getElementById('next-btn').classList.contains('d-none')) return;

        const isCorrect = selected.id === currentQuestion.id;
        const feedback = document.getElementById('feedback');
        const realObj = locations.find(l => l.id === currentQuestion.id);
        realObj.lastSeen = Date.now();

        // Highlight correct answer
        const allBtns = document.querySelectorAll('.btn-option');
        allBtns.forEach(b => {
            if (b.innerText === currentQuestion.addr) {
                b.classList.remove('btn-outline-secondary');
                b.classList.add('btn-success');
            }
        });

        if (isCorrect) {
            feedback.innerText = "üéâ –ë—Ä–∞–≤–æ! –í–µ—Ä–µ–Ω –æ—Ç–≥–æ–≤–æ—Ä.";
            feedback.className = "text-success fw-bold";
            realObj.correct++;
            streak++;
            totalCorrect++;
        } else {
            btnElement.classList.remove('btn-outline-secondary');
            btnElement.classList.add('btn-danger');
            feedback.innerText = "‚ùå –ì—Ä–µ—à–∫–∞!";
            feedback.className = "text-danger fw-bold";
            realObj.wrong++;
            streak = 0;
        }

        document.getElementById('streak').innerText = streak;
        document.getElementById('total-correct').innerText = totalCorrect;

        saveProgress();
        document.getElementById('next-btn').classList.remove('d-none');
    }

    // LIST RENDER
    function renderList() {
        const container = document.getElementById('list-container');
        container.innerHTML = '';
        
        const sorted = [...locations].sort((a, b) => b.wrong - a.wrong);

        sorted.forEach(loc => {
            const a = document.createElement('a');
            a.className = 'list-group-item list-group-item-action d-flex justify-content-between align-items-center p-3';
            
            let colorClass = 'text-dark';
            if(loc.wrong > loc.correct) colorClass = 'text-danger';
            if(loc.correct > loc.wrong + 2) colorClass = 'text-success';

            a.innerHTML = `
                <div class="me-3">
                    <div class="fw-bold ${colorClass}">${loc.name}</div>
                    <div class="address-sub">${loc.addr}</div>
                </div>
                <div class="text-nowrap">
                    <span class="badge bg-success rounded-pill p-2" title="–í–µ—Ä–Ω–∏">${loc.correct}</span>
                    <span class="badge bg-danger rounded-pill p-2" title="–ì—Ä–µ—à–Ω–∏">${loc.wrong}</span>
                </div>
            `;
            container.appendChild(a);
        });
    }

    // SYSTEM
    function saveProgress() {
        localStorage.setItem('volt_locations_v2', JSON.stringify(locations));
    }

    function downloadStats() {
        const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(locations));
        const anchor = document.createElement('a');
        anchor.href = dataStr;
        anchor.download = "volt_progress.json";
        anchor.click();
    }

    function loadStats(input) {
        const file = input.files[0];
        if (!file) return;
        const reader = new FileReader();
        reader.onload = function(e) {
            try {
                locations = JSON.parse(e.target.result);
                saveProgress();
                renderList();
                alert("–£—Å–ø–µ—à–Ω–æ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ!");
                location.reload();
            } catch (err) {
                alert("–ì—Ä–µ—à–µ–Ω —Ñ–∞–π–ª!");
            }
        };
        reader.readAsText(file);
    }

    function resetStats() {
        if(confirm("–°–∏–≥—É—Ä–Ω–∏ –ª–∏ —Å—Ç–µ? –í—Å–∏—á–∫–∏ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏ —â–µ –±—ä–¥–∞—Ç –∏–∑—Ç—Ä–∏—Ç–∏.")) {
            localStorage.removeItem('volt_locations_v2');
            location.reload();
        }
    }

    function switchTab(tab) {
        document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
        document.querySelectorAll('.view-section').forEach(s => s.classList.remove('active'));
        
        if (tab === 'game') {
            document.querySelectorAll('.nav-link')[0].classList.add('active');
            document.getElementById('view-game').classList.add('active');
        } else {
            document.querySelectorAll('.nav-link')[1].classList.add('active');
            document.getElementById('view-list').classList.add('active');
            renderList();
        }
    }

    init();
</script>
</body>
</html>
